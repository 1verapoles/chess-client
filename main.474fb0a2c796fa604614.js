(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t,n){"use strict";(function(e){var t=n(5),r=n.n(t),a=n(26);e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return console.error("No game state");var n=[];n.push(["---","---","---","---","---","---","---","---","---"]),n.push(["   "," 0 "," 1 "," 2 "," 3 "," 4 "," 5 "," 6 "," 7 "]);for(var i=function(t){var i=[];n.push(["---","---","---","---","---","---","---","---","---"]);for(var o=function(o){var c=e.pieces.find((function(e){return e.x===o&&e.y===t})),s="   ";c&&(s=a(c),s="[1m"+(0===c.player?"[37m":"[35m")+" "+s+" [0m[33m");i.push(s),7===o&&(n.push([" ".concat(t," ")].concat(r()(i))),i=[])},c=0;c<=7;c++)o(c)},o=0;o<=7;o++)i(o);n.push(["---","---","---","---","---","---","---","---","---"]);var c=["[33mgameId: ".concat(e.gameId,"\n"),"                    x\n",n.map((function(e){return"|"+e.join("|")+"|"})).join("\n"),"[0m"].join("");return t&&console.log(c),c}}).call(this,n(181)(e))},192:function(e,t,n){var r={"./af":34,"./af.js":34,"./ar":35,"./ar-dz":36,"./ar-dz.js":36,"./ar-kw":37,"./ar-kw.js":37,"./ar-ly":38,"./ar-ly.js":38,"./ar-ma":39,"./ar-ma.js":39,"./ar-sa":40,"./ar-sa.js":40,"./ar-tn":41,"./ar-tn.js":41,"./ar.js":35,"./az":42,"./az.js":42,"./be":43,"./be.js":43,"./bg":44,"./bg.js":44,"./bm":45,"./bm.js":45,"./bn":46,"./bn.js":46,"./bo":47,"./bo.js":47,"./br":48,"./br.js":48,"./bs":49,"./bs.js":49,"./ca":50,"./ca.js":50,"./cs":51,"./cs.js":51,"./cv":52,"./cv.js":52,"./cy":53,"./cy.js":53,"./da":54,"./da.js":54,"./de":55,"./de-at":56,"./de-at.js":56,"./de-ch":57,"./de-ch.js":57,"./de.js":55,"./dv":58,"./dv.js":58,"./el":59,"./el.js":59,"./en-SG":60,"./en-SG.js":60,"./en-au":61,"./en-au.js":61,"./en-ca":62,"./en-ca.js":62,"./en-gb":63,"./en-gb.js":63,"./en-ie":64,"./en-ie.js":64,"./en-il":65,"./en-il.js":65,"./en-nz":66,"./en-nz.js":66,"./eo":67,"./eo.js":67,"./es":68,"./es-do":69,"./es-do.js":69,"./es-us":70,"./es-us.js":70,"./es.js":68,"./et":71,"./et.js":71,"./eu":72,"./eu.js":72,"./fa":73,"./fa.js":73,"./fi":74,"./fi.js":74,"./fo":75,"./fo.js":75,"./fr":76,"./fr-ca":77,"./fr-ca.js":77,"./fr-ch":78,"./fr-ch.js":78,"./fr.js":76,"./fy":79,"./fy.js":79,"./ga":80,"./ga.js":80,"./gd":81,"./gd.js":81,"./gl":82,"./gl.js":82,"./gom-latn":83,"./gom-latn.js":83,"./gu":84,"./gu.js":84,"./he":85,"./he.js":85,"./hi":86,"./hi.js":86,"./hr":87,"./hr.js":87,"./hu":88,"./hu.js":88,"./hy-am":89,"./hy-am.js":89,"./id":90,"./id.js":90,"./is":91,"./is.js":91,"./it":92,"./it-ch":93,"./it-ch.js":93,"./it.js":92,"./ja":94,"./ja.js":94,"./jv":95,"./jv.js":95,"./ka":96,"./ka.js":96,"./kk":97,"./kk.js":97,"./km":98,"./km.js":98,"./kn":99,"./kn.js":99,"./ko":100,"./ko.js":100,"./ku":101,"./ku.js":101,"./ky":102,"./ky.js":102,"./lb":103,"./lb.js":103,"./lo":104,"./lo.js":104,"./lt":105,"./lt.js":105,"./lv":106,"./lv.js":106,"./me":107,"./me.js":107,"./mi":108,"./mi.js":108,"./mk":109,"./mk.js":109,"./ml":110,"./ml.js":110,"./mn":111,"./mn.js":111,"./mr":112,"./mr.js":112,"./ms":113,"./ms-my":114,"./ms-my.js":114,"./ms.js":113,"./mt":115,"./mt.js":115,"./my":116,"./my.js":116,"./nb":117,"./nb.js":117,"./ne":118,"./ne.js":118,"./nl":119,"./nl-be":120,"./nl-be.js":120,"./nl.js":119,"./nn":121,"./nn.js":121,"./pa-in":122,"./pa-in.js":122,"./pl":123,"./pl.js":123,"./pt":124,"./pt-br":125,"./pt-br.js":125,"./pt.js":124,"./ro":126,"./ro.js":126,"./ru":127,"./ru.js":127,"./sd":128,"./sd.js":128,"./se":129,"./se.js":129,"./si":130,"./si.js":130,"./sk":131,"./sk.js":131,"./sl":132,"./sl.js":132,"./sq":133,"./sq.js":133,"./sr":134,"./sr-cyrl":135,"./sr-cyrl.js":135,"./sr.js":134,"./ss":136,"./ss.js":136,"./sv":137,"./sv.js":137,"./sw":138,"./sw.js":138,"./ta":139,"./ta.js":139,"./te":140,"./te.js":140,"./tet":141,"./tet.js":141,"./tg":142,"./tg.js":142,"./th":143,"./th.js":143,"./tl-ph":144,"./tl-ph.js":144,"./tlh":145,"./tlh.js":145,"./tr":146,"./tr.js":146,"./tzl":147,"./tzl.js":147,"./tzm":148,"./tzm-latn":149,"./tzm-latn.js":149,"./tzm.js":148,"./ug-cn":150,"./ug-cn.js":150,"./uk":151,"./uk.js":151,"./ur":152,"./ur.js":152,"./uz":153,"./uz-latn":154,"./uz-latn.js":154,"./uz.js":153,"./vi":155,"./vi.js":155,"./x-pseudo":156,"./x-pseudo.js":156,"./yo":157,"./yo.js":157,"./zh-cn":158,"./zh-cn.js":158,"./zh-hk":159,"./zh-hk.js":159,"./zh-tw":160,"./zh-tw.js":160};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=192},193:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(161),o=n.n(i),c=n(162),s=n.n(c),l=n(9),u=n.n(l),p=n(14),d=n(24),m=n(3),f=n(5),h=n.n(f),v="localhost"===location.hostname,g=v?0:2,y=v&&!1?"ws://localhost:3000":"wss://chess-socket.herokuapp.com",b=v?"http://localhost:9000":"https://chess-functions.netlify.app/.netlify/functions",k=0,x=1,E=["white","black"],S=["black","white"],w=["w","b"],j="king",I="rook",O="pawn",C=[I,"knight","bishop"],P=[].concat(C,["queen"]),L=[j].concat(h()(C.reverse())),M=1,T=50,N=n(4),A=n.n(N),_=n(7),W=n.n(_),G=function(e,t){var n=Object(r.useState)(t),a=u()(n,2),i=a[0],o=a[1];return Object(r.useEffect)((function(){function t(){return(t=W()(A.a.mark((function t(){var n;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,localStorage.getItem("".concat("chessjs-").concat(e));case 2:n=t.sent,o(JSON.parse(n));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),[i,function(){var t=W()(A.a.mark((function t(n){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,localStorage.setItem("".concat("chessjs-").concat(e),JSON.stringify(n));case 3:o(n),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error({error:t.t0});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()]},D=n(21),z=n(26),H=n.n(z),R=n(163);function U(){return{name:D.b,version:D.d,repository:D.c.url,author:D.a}}function B(e){return K.apply(this,arguments)}function K(){return(K=W()(A.a.mark((function e(t){var n,r,a,i,o,c,s,l,u,p,d,m,f,h,v=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.length>1&&void 0!==v[1]?v[1]:"get",r=v.length>2&&void 0!==v[2]?v[2]:"game",a=t.map((function(e){return"".concat(e.name,"=").concat(e.value)})).join("&"),e.prev=3,i="".concat(b,"/").concat(r),e.next=7,fetch("".concat(i,"?").concat(a),{method:n});case 7:if(!(o=e.sent)){e.next=65;break}c=o.status,e.t0=r,e.next="game"===e.t0?15:"user"===e.t0?40:13;break;case 13:return console.error("Unhandled endpoint: ".concat(i)),e.abrupt("return");case 15:e.t1=n,e.next="get"===e.t1?20:"post"===e.t1?31:18;break;case 18:return console.error("Unhandled method: ".concat(n," ").concat(i)),e.abrupt("return");case 20:e.t2=c,e.next=200===e.t2?25:23;break;case 23:return console.warn("API responded with status code ".concat(c,".")),e.abrupt("return");case 25:return e.next=27,o.json();case 27:return s=e.sent,l=JSON.parse(s.text),u=l,e.abrupt("return",{gameData:u,oid:s.oid});case 31:e.t3=c,e.next=200===e.t3?36:34;break;case 34:return console.warn("API responded with status code ".concat(c,".")),e.abrupt("return");case 36:return e.next=38,o.json();case 38:return p=e.sent,e.abrupt("return",{oid:p.oid});case 40:e.t4=n,e.next="get"===e.t4?45:"post"===e.t4?56:43;break;case 43:return console.error("Unhandled method: ".concat(n," ").concat(i)),e.abrupt("return");case 45:e.t5=c,e.next=200===e.t5?50:48;break;case 48:return console.warn("API responded with status code ".concat(c,".")),e.abrupt("return");case 50:return e.next=52,o.json();case 52:return d=e.sent,m=JSON.parse(d.text),f=m,e.abrupt("return",{userData:f,oid:d.oid});case 56:e.t6=c,e.next=200===e.t6?61:59;break;case 59:return console.warn("API responded with status code ".concat(c,".")),e.abrupt("return");case 61:return e.next=63,o.json();case 63:return h=e.sent,e.abrupt("return",{oid:h.oid});case 65:return e.abrupt("return");case 68:return e.prev=68,e.t7=e.catch(3),console.error({error:e.t7}),e.abrupt("return");case 72:case"end":return e.stop()}}),e,null,[[3,68]])})))).apply(this,arguments)}function V(){return"undefined"!=typeof Worker}var q=H.a,F=(R.default,n(194)),Y=U(),X=function(e){var t=e.userId,n=Object(r.useState)(""),i=u()(n,2),o=i[0],c=i[1];return a.a.createElement(J,null,a.a.createElement("h1",null,Y.name),a.a.createElement(Q,null,a.a.createElement(Z,{to:"/game/new"},"New Game"),a.a.createElement($,null,a.a.createElement(ee,{to:o&&"/game/".concat(o)},"Load Game")," ",a.a.createElement("input",{placeholder:"Enter game identifier.",value:o,onChange:function(e){return c(e.target.value)}})),a.a.createElement(te,{href:Y.repository},"Source Code"),a.a.createElement($,null,"User ID: ",t)))},J=m.c.div.withConfig({displayName:"Home__View",componentId:"sc-1m3v609-0"})(["display:flex;justify-content:center;flex-direction:column;align-items:center;min-height:100vh;user-select:none;color:",";"],(function(e){return e.theme.color1})),Q=m.c.div.withConfig({displayName:"Home__Menu",componentId:"sc-1m3v609-1"})(["display:flex;justify-content:space-around;flex-direction:column;align-items:center;"]),Z=Object(m.c)(d.b).withConfig({displayName:"Home__MenuItem",componentId:"sc-1m3v609-2"})(["padding:1rem;text-align:center;display:block;"]),$=m.c.div.withConfig({displayName:"Home__MenuItemWrapper",componentId:"sc-1m3v609-3"})(["padding-bottom:1rem;"]),ee=Object(m.c)(Z).withConfig({displayName:"Home__MenuItemWithInput",componentId:"sc-1m3v609-4"})(["padding-bottom:0;"]),te=m.c.a.withConfig({displayName:"Home__ExternalMenuItem",componentId:"sc-1m3v609-5"})(["padding-top:1rem;padding-bottom:1rem;display:block;"]),ne=n(11),re=n.n(ne),ae=n(12),ie=n.n(ae),oe=n(168),ce=n.n(oe),se=n(169),le=n.n(se),ue=n(8),pe=n.n(ue),de=n(170),me=n.n(de),fe=n(2),he=n.n(fe),ve=n(16),ge=n.n(ve),ye=n(1),be=n.n(ye),ke=n(171),xe=n.n(ke),Ee=n(22),Se=n.n(Ee);function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){he()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie=null,Oe=new(function(){function e(){if(re()(this,e),Ie)return Ie}return ie()(e,[{key:"init",value:function(e){var t=this,n=e.eventHandler,r=void 0===n?function(){}:n,a=e.debugLevel,i=void 0===a?g:a;return this.debugLevel=i,this.eventHandler=r,this.worker=new Worker("stockfish.js"),this.worker.onmessage=function(e){var n=e.data;return t.onMessage(n)},this.sendRawCommand("uci"),this.sendRawCommand("isready"),this.depth=14,this.options=[],Ie=this}},{key:"startGame",value:function(){this.sendRawCommand("ucinewgame"),this.sendRawCommand("isready")}},{key:"sendRawCommand",value:function(e){this.worker.postMessage(e)}},{key:"sortOptions",value:function(e){return[{name:"Depth",value:this.depth,type:"spin",min:M,max:T}].concat(h()(e)).sort((function(e,t){return"Skill Level"===e.name?-1:"Skill Level"===t.name?1:"button"!==e.type&&"button"===t.type?-1:"button"===e.type&&"button"!==t.type?1:"check"!==e.type&&"check"===t.type?-1:"check"===e.type&&"check"!==t.type?1:0}))}},{key:"onMessage",value:function(t){switch(t){default:if(!t)return;var n=e.responseParser(t);if(e.isIgnoredMessage(n))return;if("STOCKFISH_GET_OPTION"===n.event){n.event;var r=ge()(n,["event"]);if(this.options=[].concat(h()(this.options),[je({},r)]),"Skill Level"===r.name){var a=je({},r),i=Math.ceil((a.max-a.min)/2);a.value=i,this.setOption(a)}if("Ponder"===r.name){var o=je({},r);o.value=!1,this.setOption(o)}}return void this.emitEvent(n);case"uciok":return this.options=this.sortOptions(this.options),void this.emitEvent({event:"STOCKFISH_INIT",debugLevel:1});case"readyok":return void this.emitEvent({event:"STOCKFISH_READY",debugLevel:1})}}},{key:"emitEvent",value:function(e){var t=e.debugLevel,n=ge()(e,["debugLevel"]);Number(t||0)>=this.debugLevel&&("STOCKFISH_UNKNOWN"===n.event?console.error(n):console.log(n)),this.eventHandler(n)}},{key:"computeNextMove",value:function(e,t){var n="";n=t?"position fen ".concat(t):"position startpos moves ".concat(e),this.sendRawCommand(n),this.sendRawCommand("go depth ".concat(this.depth))}},{key:"getOption",value:function(e){return this.options.find((function(t){return t.name===e}))}},{key:"setOption",value:function(e){var t=e.name,n=e.value,r=!1;if("Depth"===t)this.depth=n,r=!0;else{var a=this.getOption(t);if(!a)return void console.error("Option '".concat(t,"' not found."));if(a.value!==n){var i="setoption name ".concat(t," value ").concat(String(n));this.sendRawCommand(i),this.sendRawCommand("go"),r=!0}}if(r)for(var o=0;o<this.options.length;o++){var c=this.options[o];if(c.name===t){c.value=n,this.options[o]=c;break}}}}],[{key:"isIgnoredMessage",value:function(e){return"Stockfish"===e.firstWord||("Debug Log File"===e.name||("Threads"===e.name||("Hash"===e.name||("Clear Hash"===e.name||("nodestime"===e.name||"Move Overhead"===e.name)))))}},{key:"responseParser",value:function(e){var t,n=e.split(" "),r=Se()(n),a=r[0],i=r[1],o=r.slice(2);if("id"===a)return t={event:"STOCKFISH_ENGINE"},he()(t,i,o.join(" ")),he()(t,"debugLevel",0),t;if("option"===a&&"name"===i){for(var c="",s=0,l=o[s];"type"!==l;)c+=l+" ",l=o[++s];c=c.substring(0,c.length-1);var u=o.slice(s+1,o.length),p=Se()(u),d=p[0],m=p.slice(1),f=null,h={},v=[];if(m.length){var g=m[1];switch(d){default:break;case"string":f=g;break;case"check":f=Boolean(g);break;case"spin":f=Number(g);break;case"combo":f=g}var y=m.slice(2,m.length);if("spin"===d&&(h={min:Number(y[1]),max:Number(y[3])}),"combo"===d)for(var b=Se()(m),k=(b[0],b[1],b.slice(2)),x=0,E=k[x];"var"===E;)v.push(k[x+1]),E=k[x+=2]}return je({event:"STOCKFISH_GET_OPTION",name:c,type:d},null!==f&&{value:f},{},h,{},v.length>0&&{select:v},{debugLevel:0})}if("info"===a&&"depth"===i){var S=Se()(o),w=S[0],j=S.slice(1);return{event:"STOCKFISH_GET_DEPTH",depth:Number(w),analysis:j,debugLevel:0}}return"bestmove"===a?{event:"STOCKFISH_MOVE",move:i,debugLevel:1}:{event:"STOCKFISH_UNKNOWN",firstWord:a,message:e,debugLevel:10}}}]),e}());function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){he()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Le=function(){function e(){re()(this,e),this.pureAlgebraicNotation="",this.moves=[],this.movesAlgebraicNotation=[]}return ie()(e,[{key:"parseMoveToPureAlgebraicNotation",value:function(e){var t=e.from,n=e.to,r=String.fromCharCode(97+t.x),a=8-t.y,i=String.fromCharCode(97+n.x),o=8-n.y,c="".concat(r).concat(a).concat(i).concat(o);return this.pureAlgebraicNotation?" ".concat(c):c}},{key:"parsePureAlgebraicNotationToMove",value:function(e){return{from:{x:e[0].charCodeAt()-97,y:Number(8-e[1])},to:{x:e[2].charCodeAt()-97,y:Number(8-e[3])}}}},{key:"addEntry",value:function(e){var t=Object(F.a)(),n=e.from,r=e.to,a=e.player,i=e.piece,o=e.endGame;this.moves=[].concat(h()(this.moves),[Pe({id:t},e)]);var c=this.parseMoveToPureAlgebraicNotation({from:n,to:r});this.movesAlgebraicNotation=[].concat(h()(this.movesAlgebraicNotation),[Pe({id:t,string:c,player:a,piece:i},o&&{endGame:o})]),this.pureAlgebraicNotation+=c}}]),e}();function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Te=function(){function e(t){var n=t.id,r=t.type,a=t.x,i=t.y,o=t.player,c=t.firstMove,s=t.queenSide,l=t.kingSide;re()(this,e),this.id=n,this.type=r,this.x=a,this.y=i,this.player=o,this.firstMove=c,this.queenSide=s,this.kingSide=l}return ie()(e,[{key:"debug",get:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){he()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this,{playerColor:E[this.player],xColumn:["a","b","c","d","e","f","g","h"][this.x],yRow:7-this.y+1})}},{key:"canCastlePrerequisites",get:function(){return this.firstMove&&[j,I].includes(this.type)}}]),e}();function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){he()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}xe()(be.a);var _e=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.artificialIntelligenceViewEventHandler,a=n.firstPlayerId;re()(this,e),he()(this,"practice",!1),he()(this,"setArtificialIntelligenceOption",(function(e){return t.artificialIntelligence.setOption(e)})),he()(this,"newGame",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.gameId;n&&(t.gameId=n);var r=[];[k,x].forEach((function(e){[P,L].forEach((function(t,n,a){var i=0;a[n-1]&&(i=a[n-1].length*n),t.forEach((function(t,n){var a=new Te({id:Object(F.a)(),x:i+n,y:e?0:7,player:e,type:t,firstMove:t===I||t===j||void 0,queenSide:0===n,kingSide:0!==n}),o=new Te({id:Object(F.a)(),x:i+n,y:e?1:6,player:e,type:O,firstMove:!0,queenSide:0===n,kingSide:0!==n});r.push(o),r.push(a)}))}))})),t.pieces=r,V()&&t.artificialIntelligence.startGame()})),he()(this,"export",(function(){var e=U().version;return JSON.stringify({gameVersion:e,gameId:t.gameId,gameSavedAt:be()(),gameStartedAt:t.gameStartedAt,gameEndedAt:t.gameEndedAt,totalTimePlayed:t.totalTimePlayed,players:t.players,currentTurn:t.currentTurn,pieces:t.pieces,removedPieces:t.removedPieces,enPassantTarget:t.enPassantTarget,moves:t.moves,allowNoKing:t.allowNoKing,aiSettings:t.aiSettings.map((function(e){return{name:e.name,value:e.value}}))},null,"\t")})),he()(this,"import",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.resumeGame,a=void 0!==r&&r,i=n.noConsoleOutput,o=void 0!==i&&i,c=null;try{c=JSON.parse(e)}catch(t){c=e}if(c){t.gameVersion=c.gameVersion,t.gameId=c.gameId,t.gameStatus=c.gameStatus,t.gameStartedAt=be()(c.gameStartedAt),t.gameEndedAt=c.gameEndedAt?be()(c.gameEndedAt):null,t.lastSessionTimeUpdate=null,t.totalTimePlayed=be.a.duration(c.totalTimePlayed,"milliseconds"),t.currentTurn=c.currentTurn,t.pieces=c.pieces.map((function(e){return new Te(e)})),t.removedPieces=c.removedPieces,t.moves=c.moves&&c.moves,t.players=c.players,t.enPassantTarget=c.enPassantTarget,t.allowNoKing=c.allowNoKing,t.aiSettings=c.aiSettings,o||console.log("Loading game '".concat(t.gameId,"' (game version: ").concat(t.gameVersion,"). Turn: ").concat(t.currentTurn,". Time played: ").concat(t.totalTimePlayed.format("hh:mm:ss",{trim:!1}),". Last saved on ").concat(c.gameSavedAt,".")),a?t.resume():t.startArtificialIntelligenceTurn();var s=t.isGameEnd({player:t.currentPlayer===k?x:k});s&&(t.gameStatus=s,t.gameEndedAt=be()())}else console.warn("Import data is empty.")})),he()(this,"updateTimePlayed",(function(){if(!t.gameEndedAt&&t.lastSessionTimeUpdate){var e=be.a.duration(be()().diff(t.lastSessionTimeUpdate),"milliseconds");t.lastSessionTimeUpdate=be()(),t.totalTimePlayed=t.totalTimePlayed.add(e)}})),he()(this,"pause",(function(){t.lastSessionTimeUpdate=null})),he()(this,"resume",(function(){t.lastSessionTimeUpdate=be()(),t.startArtificialIntelligenceTurn()})),he()(this,"nextTurn",(function(){v&&t.practice?t.currentTurn+=2:t.currentTurn+=1,setTimeout((function(){t.unselect()}),500),t.startArtificialIntelligenceTurn()})),he()(this,"recordMove",(function(e){var n=Ae({},e,{player:t.currentPlayer});t.gameLog.addEntry(n)})),he()(this,"getFirstPiece",(function(e){var n=e.type,r=e.player;return t.pieces.find((function(e){return e.type===n&&e.player===r}))})),he()(this,"getPieceAt",(function(e){var n=e.x,r=e.y;return t.pieces.find((function(e){return e.x===n&&e.y===r}))})),he()(this,"hasPieceAt",(function(e){var n=e.x,r=e.y;return t.pieces.some((function(e){return e.x===n&&e.y===r}))})),he()(this,"removePiece",(function(e){var n=[];t.pieces.forEach((function(t){t.id!==e.id&&n.push(t)})),t.pieces=n;var r=t.removedPieces[e.player],a=[].concat(h()(r),[e]),i=t.removedPieces[Number(!e.player)];0===e.player?t.removedPieces=[a,i]:t.removedPieces=[i,a]})),he()(this,"select",(function(e){var n=e.x,r=e.y,a=!1;if(t.gameEndedAt||!t.lastSessionTimeUpdate)return a;var i=t.getPieceAt({x:n,y:r});if(i){i.x,i.y;var o=ge()(i,["x","y"]);t.selected={x:n,y:r,piece:o},a=!0}else t.selected={x:n,y:r};return a})),he()(this,"unselect",(function(){t.selected=null})),he()(this,"isSelectedSquare",(function(e){var n=e.x,r=e.y;return!!t.selected&&(t.selected.x===n&&t.selected.y===r)})),he()(this,"isPawnCapturing",(function(e){var n=e.x,r=e.y,a=e.vectorX;return e.vectorY===e.direction&&(1===a||-1===a)&&t.hasPieceAt({x:n,y:r})})),he()(this,"isPawnMoving",(function(e){var n=e.x,r=e.y,a=e.vectorX,i=e.vectorY,o=e.firstMove,c=e.direction;return!t.hasPieceAt({x:n,y:r})&&(1===c?i>0&&i<=1+o&&0===a:i<0&&i>=-1-o&&0===a)})),he()(this,"isEnPassant",(function(e){var n=e.x,r=e.y,a=e.vectorX,i=e.vectorY,o=e.direction;if(t.enPassantTarget&&i===o&&(1===a||-1===a)){var c=r-o,s=t.hasPieceAt({x:n,y:c});return console.warn({enPassant:s}),s}return!1})),he()(this,"isBishopPattern",(function(e){var t=e.vectorX,n=e.vectorY;return Math.abs(t)===Math.abs(n)})),he()(this,"isBishopMoveFree",(function(e){var n=e.origin,r=e.destination,a=e.vector;return!t.pieces.some((function(e){if(e.id===n.id)return!1;var t={x:e.x-n.x,y:e.y-n.y};if(Math.abs(t.x)===Math.abs(t.y)){var i=!1,o=!1;return i=a.x>0?e.x<r.x&&e.x>n.x:e.x>r.x&&e.x<n.x,o=a.y>0?e.y<r.y&&e.y>n.y:e.y>r.y&&e.y<n.y,i&&o}return!1}))})),he()(this,"isRookPattern",(function(e){var t=e.vectorX,n=e.vectorY;return 0===t&&0!==n||0!==t&&0===n})),he()(this,"isRookMoveFree",(function(e){var n=e.origin,r=e.vector,a=r.x?"y":"x",i=r.x?"x":"y",o=n[a],c=n[i]+r[i];return!t.pieces.some((function(e){return e[a]===o&&e.id!==n.id&&(r[i]>0&&e[i]>n[i]&&e[i]<c||r[i]<0&&e[i]<n[i]&&e[i]>c)}))})),he()(this,"isKingPattern",(function(e){var t=e.vectorX,n=e.vectorY;return t>=-1&&t<=1&&n>=-1&&n<=1})),he()(this,"isCastlePattern",(function(e){var t=e.vectorX,n=e.vectorY;return 2===Math.abs(t)&&0===n})),he()(this,"performCastle",(function(e){var n=e.castleVectorX,r=e.selectedPiece,a=e.destination,i=e.from,o=t.currentPlayer===k?7:0,c=n>0?7:0,s=n>0?-1:1,l=t.pieces.find((function(e){return e.type===I&&e.player===r.player&&e.firstMove&&e.x===c}));return!!l&&(!(n>0?[5,6]:[1,2,3]).map((function(e){return t.hasPieceAt({x:e,y:o})||t.isKingInCheck({x:e,y:o})})).some((function(e){return e}))&&(t.pieces=t.pieces.map((function(e){return e.id===r.id?new Te(Ae({},r,{x:a.x,y:a.y,firstMove:!1})):e.id===l.id?new Te(Ae({},l,{x:a.x+s,firstMove:!1})):e})),t.recordMove({piece:{id:r.id,type:r.type},from:i,to:a}),t.nextTurn(),!0))})),he()(this,"isPiecePattern",(function(e){var n=e.destination,r=n.x,a=n.y,i=e.origin,o=e.type,c=e.player,s=e.firstMove,l=r-i.x,u=a-i.y;switch(o){default:break;case j:return t.isKingPattern({vectorX:l,vectorY:u});case"queen":return t.isBishopPattern({vectorX:l,vectorY:u})&&t.isBishopMoveFree({origin:i,destination:{x:r,y:a},vector:{x:l,y:u}})||t.isRookPattern({vectorX:l,vectorY:u})&&t.isRookMoveFree({origin:i,vector:{x:l,y:u}});case I:return t.isRookPattern({vectorX:l,vectorY:u})&&t.isRookMoveFree({origin:i,vector:{x:l,y:u}});case"knight":if(2===Math.abs(l)&&1===Math.abs(u)||1===Math.abs(l)&&2===Math.abs(u))return!0;break;case"bishop":return t.isBishopPattern({vectorX:l,vectorY:u})&&t.isBishopMoveFree({origin:i,destination:{x:r,y:a},vector:{x:l,y:u}});case O:var p=c===k?-1:1;return t.isPawnMoving({x:r,y:a,vectorX:l,vectorY:u,firstMove:s,direction:p})||t.isPawnCapturing({x:r,y:a,vectorX:l,vectorY:u,direction:p})||t.isEnPassant({x:r,y:a,vectorX:l,vectorY:u,direction:p})}return!1})),he()(this,"isKingInCheck",(function(e){if(t.allowNoKing)return!1;var n=null,r=t.pieces.filter((function(e){return e.type===j&&e.player===t.currentPlayer&&(n=Ae({},e)),e.player!==t.currentPlayer})),a=e||n;return a?r.some((function(e){return t.isPiecePattern({destination:{x:a.x,y:a.y},origin:{x:e.x,y:e.y,id:e.id},type:e.type,player:e.player,firstMove:!1})})):(console.error("King not found?!"),!1)})),he()(this,"isGameEnd",(function(e){var n=e.player,r=void 0===n?t.currentPlayer:n;if(t.allowNoKing)return!1;var a=null,i=[],o=t.pieces.filter((function(e){return e.type===j&&e.player!==r&&(a=Ae({},e)),e.player===r||(i.push(e),!1)}));if(!a)return console.error("Opponent king not found?!"),!1;for(var c=9,s=!0,l=[],u=-1;u<=1;u++)for(var p=function(e){var n={x:a.x+u,y:a.y+e};if(n.x<0||n.y<0||n.x>7||n.y>7)return c--,"continue";var r=o.some((function(e){return t.isPiecePattern({destination:n,origin:{x:e.x,y:e.y,id:e.id},type:e.type,player:e.player,firstMove:!1})}));l.push(r),0===u&&0===e&&(s=!r)},d=-1;d<=1;d++)p(d);var m=l.reduce((function(e,t){return e+Number(t)}));return m===c?"checkmate":!(!s||m!==c-1)&&"draw"})),he()(this,"isLegalMove",(function(e){var n=e.destination,r=e.origin,a=e.type,i=e.player,o=e.firstMove;return t.isPiecePattern({destination:n,origin:r,type:a,player:i,firstMove:o})})),he()(this,"moveSelectedPiece",(function(e){var n=e.x,r=e.y,a=!1;if(t.gameEndedAt||!t.lastSessionTimeUpdate)return a;var i=null,o=null;if(!t.selected)return a;var c=t.selected,s=c.x,l=c.y,u=c.piece;if(!u)return t.select({x:n,y:r}),a;var p=[].concat(t.pieces),d=[].concat(t.removedPieces);if(t.pieces=t.pieces.map((function(e){if(e.x===s&&e.y===l&&e.id===u.id){if(t.isLegalMove({origin:{x:e.x,y:e.y,id:e.id},destination:{x:n,y:r},type:u.type,player:u.player,firstMove:u.firstMove})){var c=t.getPieceAt({x:n,y:r});if(c){if(u.player!==t.currentPlayer||c.player===u.player)return e;i=c}else if(u.player!==t.currentPlayer)return e;if(a=!0,t.select({x:n,y:r,piece:Ae({},e,{firstMove:!1})}),e.type===O&&e.firstMove){if(2===Math.abs(e.y-r)){var p=t.currentPlayer===k?r+1:r-1;t.enPassantTarget={x:n,y:p}}}else t.enPassantTarget&&(t.enPassantTarget=null);return e.type===O?t.halfmoveClock=0:t.halfmoveClock+=1,new Te(Ae({},e,{x:n,y:r,firstMove:!1}))}if(e.canCastlePrerequisites){var d=n-e.x,m=r-e.y;t.isCastlePattern({vectorX:d,vectorY:m})&&(o=d)}return t.select({x:n,y:r}),e}return e})),i&&(t.halfmoveClock=0,t.removePiece(i)),t.isKingInCheck())return t.pieces=p,t.removedPieces=d,a=!1;var m=t.isGameEnd({});return m?(t.gameStatus=m,t.recordMove({piece:{id:u.id,type:u.type},from:{x:s,y:l},to:{x:n,y:r},endGame:m}),"draw"===m&&t.nextTurn(),t.gameEndedAt=be()(),a):o?t.performCastle({castleVectorX:o,selectedPiece:u,destination:{x:n,y:r},from:{x:s,y:l}}):(a&&(t.recordMove({piece:{id:u.id,type:u.type},from:{x:s,y:l},to:{x:n,y:r}}),t.nextTurn()),a)})),he()(this,"startArtificialIntelligenceTurn",(function(){if(V()&&"AI"===t.currentPlayerObject.control){var e=t.artificialIntelligenceStatus,n=e.initialized,r=e.gameReady;n&&r?(t.artificialIntelligenceStatus.computingNextMove=!0,setTimeout((function(){t.artificialIntelligence.computeNextMove(t.gameLog.pureAlgebraicNotation,t.fenString)}),1e3)):console.error("AI is not ready.")}})),he()(this,"handleArtificialIntelligenceEvent",(function(e){var n=t.artificialIntelligenceStatus,r=n.initialized,a=n.gameReady,i=n.queueSettingUpdate;switch(e.event){default:break;case"STOCKFISH_INIT":t.artificialIntelligenceStatus.initialized=!0;break;case"STOCKFISH_READY":r&&!a?(t.artificialIntelligenceStatus.gameReady=!0,t.startArtificialIntelligenceTurn()):a&&t.startArtificialIntelligenceTurn(),i&&(t.aiSettings=i,t.artificialIntelligenceStatus.queueSettingUpdate=[]);break;case"STOCKFISH_MOVE":if("AI"===t.currentPlayerObject.control){t.artificialIntelligenceStatus.computingNextMove=!1;var o=t.gameLog.parsePureAlgebraicNotationToMove(e.move),c=o.from,s=o.to;t.select({x:c.x,y:c.y}),t.moveSelectedPiece({x:s.x,y:s.y}),t.artificialIntelligenceViewEventHandler&&t.artificialIntelligenceViewEventHandler(Ae({},e,{from:c,to:s}))}}})),he()(this,"fenCastlingAvailability",(function(e){var t=[];return e.forEach((function(e){t[e.player]?t[e.player]=[].concat(h()(t[e.player]),[e]):t[e.player]=[e]})),t.map((function(e){for(var t=q({type:"king",player:e[0].player}),n=q({type:"queen",player:e[0].player}),r=!1,a=!1,i=!1,o=0;o<e.length;o++){var c=e[o];if(c.type===j&&(r=!0,!c.firstMove)){t="",n="";break}c.type===I&&(c.queenSide&&(a=!0,c.firstMove||(n="")),c.kingSide&&(i=!0,c.firstMove||(t="")))}return r?"".concat(i?t:"").concat(a?n:""):""})).join("")||"-"})),this.gameId=Object(F.a)(),this.gameStatus="ongoing",this.gameStartedAt=be()(),this.gameEndedAt=null,this.lastSessionTimeUpdate=be()(),this.totalTimePlayed=be.a.duration(be()().diff(be()()),"milliseconds"),this.currentTurn=0,this.pieces=[],this.removedPieces=[[],[]];var i=V();this.players=[{playerId:a,color:k,control:"Human"},{playerId:null,color:x,control:"Human"}],this.enPassantTarget=null,this.halfmoveClock=0,this.allowNoKing=!1,this.gameLog=new Le,this.artificialIntelligenceStatus={initialized:!1,gameReady:!1,queueSettingUpdate:[]},i&&(this.artificialIntelligenceViewEventHandler=r,this.artificialIntelligence=Oe.init({eventHandler:this.handleArtificialIntelligenceEvent}))}return ie()(e,[{key:"setPlayerControl",value:function(e,t){if("AI"!==t)return this.players[e].control="Human",void(this.players[e].playerId=t);this.players[e].control="AI",this.players[e].playerId=null}},{key:"removePlayer",value:function(e){var t=this.players.map((function(t){return t.playerId!==e?Ae({},t):Ae({},t,{playerId:null,control:"Human"})}));this.players=h()(t)}},{key:"currentPlayer",get:function(){return this.currentTurn%2==0?k:x}},{key:"currentPlayerObject",get:function(){return this.players[this.currentPlayer]}},{key:"piecesSortedByRank",get:function(){return this.pieces.sort((function(e,t){return e.y>t.y?-1:e.y<t.y||e.x>t.x?1:e.x<t.x?-1:0}))}},{key:"fenString",get:function(){var e=[],t=this.piecesSortedByRank.map((function(t){return[I,j].includes(t.type)&&e.push(t),{fen:q(t),x:t.x,y:t.y}})),n={};t.forEach((function(e){n[e.y]?n[e.y]=[].concat(h()(n[e.y]),[e]):n[e.y]=[e]}));for(var r=[],a=function(e){var t=n[e];if(!t)return r.push("8"),"continue";var a="";t.forEach((function(e,n){var r=t[n-1],i=t[n+1],o=0,c=0;o=r?e.x-r.x-1:e.x,i||(c=7-e.x),a+=(o||"")+e.fen+(c||"")})),r.push(a)},i=0;i<=7;i++)a(i);var o=w[this.currentPlayer],c=this.fenCastlingAvailability(e),s="-";this.enPassantTarget&&(s=[String.fromCharCode(97+this.enPassantTarget.x),8-this.enPassantTarget.y].join(""));var l=Math.floor(this.currentTurn/2)+1;return[r.join("/"),o,c,s,this.halfmoveClock,l].join(" ")}},{key:"log",get:function(){return this.gameLog.movesAlgebraicNotation}},{key:"aiSettings",get:function(){return this.artificialIntelligence.options},set:function(e){var t=this;this.artificialIntelligenceStatus.initialized?e.map((function(e){return t.setArtificialIntelligenceOption(e)})):this.artificialIntelligenceStatus.queueSettingUpdate=e}}]),e}();function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ge=function(){function e(){re()(this,e),he()(this,"connectionRetries",0),he()(this,"connectionOpened",!1)}return ie()(e,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.eventHandler;this.eventHandler=n;var r=new WebSocket(y);r.onopen=function(){return e.onOpen()},r.onclose=function(t){return e.onClose(t)},r.onmessage=function(t){return e.onMessage(t)},this.socket=r}},{key:"onOpen",value:function(){console.info("GameSocket server has opened the connection."),this.connectionRetries=0,this.sendMessage({event:"WEBSOCKET_EVENT_JOIN"})}},{key:"onClose",value:function(e){var t=this;switch(console.log("Connection to GameSocket server is closed.",{code:e.code}),e.code){default:return;case 1006:return void setTimeout((function(){if(t.connectionRetries<3)return console.log("Reconnecting to GameSocket..."),t.init({eventHandler:t.eventHandler}),void(t.connectionRetries+=1)}),1e3)}}},{key:"onMessage",value:function(e){if(this.eventHandler){var t=JSON.parse(e.data);this.eventHandler(t)}}},{key:"sendMessage",value:function(e){var t=JSON.stringify(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){he()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({gameId:this.gameId,playerId:this.playerId},e));this.socket.send(t)}}]),e}(),De=function(){var e=W()(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.serviceWorker){e.next=5;break}return e.next=3,navigator.serviceWorker.getRegistrations();case 3:return t=e.sent,e.abrupt("return",!!t.length>0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(){var e=W()(A.a.mark((function e(){var t,n,r,a,i,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.serviceWorker){e.next=23;break}return e.next=3,navigator.serviceWorker.getRegistrations();case 3:for(t=e.sent,n=!0,r=!1,a=void 0,e.prev=7,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)o.value.unregister();e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),r=!0,a=e.t0;case 15:e.prev=15,e.prev=16,n||null==i.return||i.return();case 18:if(e.prev=18,!r){e.next=21;break}throw a;case 21:return e.finish(18);case 22:return e.finish(15);case 23:case"end":return e.stop()}}),e,null,[[7,11,15,23],[16,,18,22]])})));return function(){return e.apply(this,arguments)}}(),He=m.c.div.withConfig({displayName:"SettingsMenuBase",componentId:"sc-87th5r-0"})(["width:240px;position:absolute;margin-top:-10px;padding:10px;background:",";opacity:0.95;color:",";border:1px solid black;z-index:1;"],(function(e){return e.theme.background2}),(function(e){return e.theme.color2})),Re=Object(m.c)((function(e){var t=e.children,n=ge()(e,["children"]);return a.a.createElement("select",n,t&&t.map((function(e){return a.a.createElement("option",{key:e&&void 0!==e.text?e.text:void 0!==e.value?e.value:e,value:e&&void 0!==e.value?e.value:e},e&&void 0!==e.text?e.text:void 0!==e.value?e.value:e)})))})).withConfig({displayName:"SettingDropdown",componentId:"sc-158l7ry-0"})(["width:130px;"]),Ue=function(e){var t=e.children,n=ge()(e,["children"]);return a.a.createElement("button",n,t)},Be=[{name:"Dark",evenSquareBackground:"rgb(210, 210, 210)",oddSquareBackground:"rgb(150, 150, 150)",background1:"rgb(40, 40, 40)",background2:"rgb(118, 118, 118)",color1:"rgb(210, 210, 210)",color2:"rgb(250, 250, 250)",link:{normal:"rgb(180, 186, 228)"}},{name:"Light",evenSquareBackground:"rgb(210, 210, 210)",oddSquareBackground:"rgb(150, 150, 150)",background1:"rgb(200, 200, 200)",background2:"rgb(118, 118, 118)",color1:"rgb(30, 30, 30)",color2:"rgb(250, 250, 250)",link:{normal:"rgb(44, 56, 135)"}}],Ke=n(18),Ve=n.n(Ke),qe=function(e){return a.a.createElement("input",Ve()({type:"checkbox"},e))},Fe=function(e){var t=e.userId,n=e.gameState,i=e.spectators,o=e.settingsOpened,c=e.themeIndex,s=e.setThemeIndex,l=e.handleUpdateOptionWithWebsocket,p=e.updateGameState,d=e.removeSpectator,m=e.addSpectator,f=function(){var e=Object(r.useState)(!1),t=u()(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){function e(){return(e=W()(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]),[n,function(){var e=W()(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return e.prev=1,e.next=4,navigator.serviceWorker.register("/service-worker.js");case 4:a(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error({error:e.t0});case 10:return e.abrupt("return");case 11:return e.prev=11,e.next=14,ze();case 14:a(!1),e.next=20;break;case 17:e.prev=17,e.t1=e.catch(11),console.error({error:e.t1});case 20:case"end":return e.stop()}}),e,null,[[1,7],[11,17]])})));return function(t){return e.apply(this,arguments)}}()]}(),v=u()(f,2),g=v[0],y=v[1];if(!o)return null;var b=function(){var e=W()(A.a.mark((function e(t){var r,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.files[0],e.next=3,r.text();case 3:a=e.sent,n.import(a),p(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=[].concat(h()(n.players.filter((function(e){return e.playerId})).map((function(e){return{value:e.playerId,colorIndex:e.color,role:E[e.color]}}))),h()(i.map((function(e){return{value:e,role:"spectator"}})))),x=function(e,t){return t.colorIndex===e||1===k.filter((function(e){return void 0!==e.colorIndex})).length||n.players[0].playerId===n.players[1].playerId&&0===i.length?"":"".concat(t.role,": ")},S=function(e,r){return r.value===t?0===i.length&&1===k.filter((function(e){return void 0!==e.colorIndex})).length||n.players[0].playerId===n.players[1].playerId&&0===i.length?"Human":"You":r.value};return a.a.createElement("div",null,a.a.createElement(Ye,null,a.a.createElement(He,null,E.map((function(e,t){return a.a.createElement(Je,{key:e},a.a.createElement("span",null,e,":")," ",a.a.createElement(Re,{value:n.players[t].playerId||n.players[t].control,onChange:function(e){var r=e.target.value;return function(e,t){var r=n.players[e].playerId;n.setPlayerControl(e,t),p(n);var a=n.players;i.includes(t)&&d(t),r&&!a.map((function(e){return e.playerId})).includes(r)&&m(r),l({name:"setPlayerControl",value:{colorIndex:e,playerId:t}})}(t,r)}},function(e){return[].concat(h()(h()(k).map((function(t){return{value:t.value,text:"".concat(x(e,t)).concat(S(0,t))}})).reduce((function(e,t){return e.map((function(e){return e.text})).includes(t.text)?e:[].concat(h()(e),[t])}),[])),["AI"])}(t)))})),a.a.createElement(Je,null,a.a.createElement("span",null,"Time limit:")," None"),a.a.createElement(Je,null,a.a.createElement("span",null,"Offline mode:")," ",a.a.createElement("span",null,a.a.createElement(qe,{onChange:function(){return y(!g)},checked:g}),g?"Enabled":"Disabled")),a.a.createElement(Je,null,a.a.createElement("span",null,"Theme:")," ",a.a.createElement(Re,{value:c,onChange:function(e){var t=e.target.value;return s(t)}},h()(Be.map((function(e,t){return{value:t,text:e.name}}))))),a.a.createElement(Qe,null,a.a.createElement(Ue,{onClick:function(){var e="chess-".concat(n.gameId,"-").concat(be()().format("YYYY-MM-DD-HH-mm-ss")),t=prompt("Enter a name for your saved game.",e);if(t){var r=n.export(),a=new Blob([r],{type:"application/json"}),i=document.createElement("a");i.download=t,i.href=URL.createObjectURL(a),i.click()}}},"Export Game"),a.a.createElement(Ue,{onClick:function(){document.getElementById("load-file-input").click()}},"Import Game")))),a.a.createElement(Ze,{onChange:b,accept:"application/json"}))},Ye=m.c.div.withConfig({displayName:"SettingsMenu__SettingsMenuAnchor",componentId:"sc-18a6kp0-0"})(["margin-left:-117px;"]),Xe="\n    display: flex;\n    justify-content: space-between;\n    text-transform: capitalize;\n    cursor: pointer;\n    font-family: sans-serif;\n    padding: 2px;\n",Je=m.c.label.withConfig({displayName:"SettingsMenu__SettingsItem",componentId:"sc-18a6kp0-1"})([""," &:hover{background:lightblue;color:black;}"],Xe),Qe=m.c.div.withConfig({displayName:"SettingsMenu__SettingsItemBase",componentId:"sc-18a6kp0-2"})([""," justify-content:space-around;"],Xe),Ze=m.c.input.attrs({type:"file",id:"load-file-input"}).withConfig({displayName:"SettingsMenu__HiddenFileLoader",componentId:"sc-18a6kp0-3"})(["display:none;"]),$e=function(e){return a.a.createElement("input",Ve()({type:"range"},e))},et={check:function(e){var t=e.name,n=e.value,r=e.updateSetting;return a.a.createElement("span",null,a.a.createElement(qe,{onChange:function(){return r({name:t,value:!n})},checked:n})," ",n?"Enabled":"Disabled")},spin:function(e){var t=e.name,n=e.value,r=e.min,i=e.max,o=e.updateSetting;return a.a.createElement($e,{onChange:function(e){var n=e.target.value;return o({name:t,value:Math.floor(n)})},value:n,min:r,max:i})},combo:function(e){var t=e.name,n=e.value,r=e.select,i=e.updateSetting;return a.a.createElement(Re,{onChange:function(e){var n=e.target.value;return i({name:t,value:n})},value:n},r)}},tt=function(e){var t=e.gameState,n=e.settingsOpened,r=e.handleUpdateAIOptionWithWebsocket;if(!n||!t.artificialIntelligenceStatus.initialized)return null;var i=function(e){var n=e.name,a=e.value;t.setArtificialIntelligenceOption({name:n,value:a}),r({name:n,value:a})};return a.a.createElement("div",null,a.a.createElement(nt,null,a.a.createElement(rt,null,t.aiSettings.map((function(e){var t=et[e.type]||a.a.createElement("span",null,String(e.value));return a.a.createElement(Je,{key:e.name},a.a.createElement("span",null,e.name.replace(/_/g," "),":"),a.a.createElement(t,Ve()({},e,{updateSetting:i})))})))))},nt=m.c.div.withConfig({displayName:"AISettingsMenu__AISettingsMenuAnchor",componentId:"x340z-0"})(["margin-left:-197px;"]),rt=Object(m.c)(He).withConfig({displayName:"AISettingsMenu",componentId:"x340z-1"})(["width:320px;"]),at=function(e){var t=e.userId,n=e.gameState,i=e.updateGameState,o=e.spectators,c=e.removeSpectator,s=e.addSpectator,l=e.themeIndex,p=e.setThemeIndex,d=e.handleUpdateOptionWithWebsocket,m=e.handleUpdateAIOptionWithWebsocket,f=Object(r.useState)({game:!1,ai:!1}),h=u()(f,2),v=h[0],g=h[1],y=function(e){var t=null;switch(e){default:t={game:!v.game,ai:!1};break;case"ai":t={ai:!v.ai,game:!1}}g(t),t[e]?n.pause():n.resume(),n.unselect(),i(n)};return a.a.createElement(r.Fragment,null,a.a.createElement(it,null,a.a.createElement(ot,{player:n.currentPlayer},E[n.currentPlayer]),a.a.createElement(ct,null,"⏱️"," ",n.totalTimePlayed.format("hh:mm:ss",{trim:!1})),a.a.createElement(st,{open:v.game,onClick:function(){return y("game")}},"⚙️"),n.artificialIntelligenceStatus.initialized&&a.a.createElement(st,{open:v.ai,onClick:function(){return y("ai")}},"🤖")),a.a.createElement(Fe,{userId:t,gameState:n,spectators:o,settingsOpened:v.game,handleUpdateOptionWithWebsocket:d,themeIndex:l,setThemeIndex:p,updateGameState:i,removeSpectator:c,addSpectator:s}),a.a.createElement(tt,{gameState:n,settingsOpened:v.ai,handleUpdateAIOptionWithWebsocket:m}))},it=m.c.div.withConfig({displayName:"GameStats",componentId:"sc-1w9i0la-0"})(["display:flex;justify-content:center;align-items:center;text-align:center;font-family:sans-serif;letter-spacing:1px;flex-wrap:wrap;margin:10px;padding:10px;border-radius:5px;background:",";color:",";min-height:40px;box-sizing:border-box;font-size:18px;"],(function(e){return e.theme.background2}),(function(e){return e.theme.color2})),ot=m.c.div.withConfig({displayName:"GameStats__CurrentPlayer",componentId:"sc-1w9i0la-1"})(["text-transform:uppercase;font-weight:bold;color:",";width:60px;margin-left:11px;margin-right:20px;"],(function(e){return E[e.player]})),ct=m.c.div.withConfig({displayName:"GameStats__TimePlayed",componentId:"sc-1w9i0la-2"})(["background:hsla(200,40%,60%,80%);padding:4px 8px;border-radius:4px;"]),st=m.c.button.withConfig({displayName:"GameStats__OpenSettings",componentId:"sc-1w9i0la-3"})(["font-size:14px;margin-left:10px;box-sizing:border-box;padding:2px;cursor:pointer;background:none;border:none;--bg:rgba(0,0,0,0.5);border-bottom:2px solid var(--bg);&:hover{--bg:red;}",""],(function(e){return e.open&&"--bg: red;"})),lt={pawn:function(e){var t=e.color1;e.color2;return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 45 45"},a.a.createElement("path",{d:"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z ",style:{opacity:1,fill:t,fillOpacity:1,fillRule:"nonzero",stroke:"#000000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1}}))},bishop:function(e){var t=e.color1,n=e.color2;return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 45 45"},a.a.createElement("g",{style:{opacity:1,fill:"none",fillRule:"evenodd",fillOpacity:1,stroke:"#000000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1}},a.a.createElement("g",{style:{fill:t,stroke:"#000000",strokeLinecap:"butt"}},a.a.createElement("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"}),a.a.createElement("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),a.a.createElement("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})),a.a.createElement("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:n,strokeLinejoin:"miter"}})))},knight:function(e){var t=e.color1,n=e.color2;return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 45 45"},a.a.createElement("g",{style:{fill:t,fillRule:"evenodd",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none"}},a.a.createElement("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:t,stroke:"black"===t?t:n}}),a.a.createElement("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:t,stroke:"black"===t?t:n}}),a.a.createElement("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:t,stroke:n}}),a.a.createElement("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:t,stroke:n}}),a.a.createElement("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:n,stroke:"black"===t?t:n,strokeWidth:.5}})))},rook:function(e){var t=e.color1,n=e.color2;return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 45 45"},a.a.createElement("g",{style:{fill:t,stroke:"black"===t?t:n,fillRule:"evenodd",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none"}},a.a.createElement("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),a.a.createElement("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:n,strokeWidth:1,strokeLinejoin:"miter"}}),a.a.createElement("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:n,strokeWidth:1,strokeLinejoin:"miter"}}),a.a.createElement("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:n,strokeWidth:1,strokeLinejoin:"miter"}}),a.a.createElement("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:n,strokeWidth:1,strokeLinejoin:"miter"}}),a.a.createElement("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:n,strokeWidth:1,strokeLinejoin:"miter"}})))},king:function(e){var t=e.color1,n=e.color2;return a.a.createElement("svg",{xmlns:"http: //www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 45 45"},a.a.createElement("g",{xmlns:"http: //www.w3.org/2000/svg",style:{fill:t,fillRule:"evenodd",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none"}},a.a.createElement("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:n,stroke:t,strokeLinecap:"miter",strokeWidth:1}}),a.a.createElement("path",{d:"M 20,8 L 25,8",style:{fill:t,stroke:t,strokeLinecap:"miter"}}),a.a.createElement("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:he()({fill:t,stroke:"black"===t?t:n,strokeLinecap:"butt"},"strokeLinecap","miter")}),a.a.createElement("path",{d:"M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z ",style:{fill:t,stroke:n}}),a.a.createElement("path",{d:"M 11.5,30 C 17,27 27,27 32.5,30",style:{fill:t,stroke:n}}),a.a.createElement("path",{d:"M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5",style:{fill:t,stroke:n}}),a.a.createElement("path",{d:"M 11.5,37 C 17,34 27,34 32.5,37",style:{fill:t,stroke:n}})))},queen:function(e){var t=e.color1,n=e.color2;return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 45 45"},a.a.createElement("g",{style:{opacity:1,fill:t,fillOpacity:1,fillRule:"evenodd",stroke:t,strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1}},a.a.createElement("g",{style:{fill:t,stroke:"black"===t?t:n}},a.a.createElement("circle",{cx:"6",cy:"12",r:"2.75"}),a.a.createElement("circle",{cx:"14",cy:"9",r:"2.75"}),a.a.createElement("circle",{cx:"22.5",cy:"8",r:"2.75"}),a.a.createElement("circle",{cx:"31",cy:"9",r:"2.75"}),a.a.createElement("circle",{cx:"39",cy:"12",r:"2.75"})),a.a.createElement("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",stroke:"black"===t?t:n}}),a.a.createElement("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z",style:{strokeLinecap:"butt",stroke:"black"===t||"black"===t?t:n}}),a.a.createElement("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{file:t,stroke:t,strokeLinecap:"butt"}}),a.a.createElement("path",{d:"M 11,29 A 35,35 1 0 1 34,29",style:{file:t,stroke:n}}),a.a.createElement("path",{d:"M 12.5,31.5 L 32.5,31.5",style:{file:t,stroke:n}}),a.a.createElement("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5",style:{file:t,stroke:n}}),a.a.createElement("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5",style:{file:t,stroke:n}})))}},ut=function(e){var t=e.type,n=e.player;if(!t)return null;var r=lt[t];return r?a.a.createElement(pt,{title:t},a.a.createElement(r,{color1:E[n],color2:S[n]})):t},pt=m.c.div.withConfig({displayName:"PieceIcon__IconContainer",componentId:"sc-1mkw3w1-0"})(["svg{width:100%;height:100%;}"]),dt=function(e){for(var t=e.gameState,n=e.handleSelectWithWebsocket,r=[],i=0;i<=9;i++)for(var o=0;o<=9;o++)0===o&&0===i||9===o&&9===i||9===o&&0===i||0===o&&9===i?r.push(a.a.createElement(ht,{key:"".concat(o,"-").concat(i)})):0===o?r.push(a.a.createElement(ht,{key:"".concat(o,"-").concat(i),border:"right"},9-i)):9===o?r.push(a.a.createElement(ht,{key:"".concat(o,"-").concat(i),border:"left"},9-i)):0===i?r.push(a.a.createElement(ht,{key:"".concat(o,"-").concat(i),border:"bottom"},String.fromCharCode(96+o))):9===i?r.push(a.a.createElement(ht,{key:"".concat(o,"-").concat(i),border:"top"},String.fromCharCode(96+o))):function(){var e=o-1,c=i-1,s=t.getPieceAt({x:e,y:c});r.push(a.a.createElement(ft,{key:"".concat(o,"-").concat(i),even:(o+i)%2==0,player:s&&s.player,onClick:function(){return n({x:e,y:c,piece:s})},selected:t.isSelectedSquare({x:e,y:c})},a.a.createElement(ut,s)))}();return a.a.createElement(mt,null,r)},mt=m.c.div.withConfig({displayName:"Board",componentId:"sc-1p9rg51-0"})(["display:grid;grid-template:repeat(10,calc(96vw / 10)) / repeat(10,calc(96vw / 10));@media screen and (orientation:landscape){grid-template:repeat(10,calc((80vh - 5rem) / 10)) / repeat(10,calc((80vh - 5rem) / 10));}"]),ft=m.c.div.withConfig({displayName:"Board__Square",componentId:"sc-1p9rg51-1"})(["background:",";color:",";text-shadow:0 0 2px ",";display:flex;justify-content:center;align-items:center;overflow:hidden;"],(function(e){return e.selected?"green":e.even?e.theme.evenSquareBackground:e.theme.oddSquareBackground}),(function(e){return e.player?"black":"white"}),(function(e){return e.player?"white":"black"})),ht=m.c.div.withConfig({displayName:"Board__Side",componentId:"sc-1p9rg51-2"})(["display:flex;justify-content:center;align-items:center;font-family:monospace;opacity:0.8;"," font-size:14px;"],(function(e){return e.border?"border-".concat(e.border,": 1px solid black;"):null})),vt=function(e){var t=e.gameState,n=e.colorIndex;return a.a.createElement(gt,null,t.removedPieces[n].map((function(e){return a.a.createElement(yt,{key:e.id},a.a.createElement(ut,e))})))},gt=m.c.div.withConfig({displayName:"Graveyard",componentId:"sc-8musrk-0"})(["width:95%;display:flex;flex-wrap:wrap;min-height:4vw;background:",";padding:1vh;border:1px solid black;border-radius:5px;@media screen and (orientation:landscape){min-height:4vh;}"],(function(e){return e.theme.background2})),yt=m.c.div.withConfig({displayName:"Graveyard__Tomb",componentId:"sc-8musrk-1"})(["width:4vw;@media screen and (orientation:landscape){width:4vh;}"]),bt=function(e){var t=e.gameState;return t.log.length?a.a.createElement(kt,null,t.log.map((function(e){var t=e.id,n=e.string,r=e.piece,i=e.endGame;return a.a.createElement(xt,{key:t},a.a.createElement(Et,null,a.a.createElement(ut,r)),n,i&&"X")}))):null},kt=m.c.div.withConfig({displayName:"Log",componentId:"sc-9w4sn7-0"})(["margin-top:2.5rem;margin-bottom:1rem;width:95%;display:flex;flex-wrap:wrap;flex-direction:column;align-items:space-between;background:",";padding:10px;border:1px solid black;max-height:35vh;border-radius:5px;@media screen and (orientation:landscape){max-height:35vw;}"],(function(e){return e.theme.background2})),xt=m.c.div.withConfig({displayName:"Log__LogEntry",componentId:"sc-9w4sn7-1"})(["display:flex;align-items:center;padding:0.05rem;"]),Et=m.c.div.withConfig({displayName:"Log__LogIconContainer",componentId:"sc-9w4sn7-2"})(["width:2.75vh;"]);function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){he()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jt=function(e){function t(e){var n;re()(this,t),n=ce()(this,le()(t).call(this,e)),he()(pe()(n),"loadGame",W()(A.a.mark((function e(){var t,r,a,i,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.props.gameId){e.next=5;break}return e.next=3,B([{name:"fileId",value:n.props.gameId}]);case 3:(t=e.sent)&&t.gameData?((r=n.state.gameState).import(t.gameData),r.resume(),n.setState({gameState:r,oid:t.oid})):(console.error("Game not found. New game created instead."),a=n.state,i=a.gameState,o=a.gameSocket,i.newGame({gameId:n.props.gameId}),o.gameId=n.props.gameId,o.playerId=n.props.userId,n.updateGameState(i),n.props.history.replace({pathname:"/game/".concat(i.gameId),newGame:!0}));case 5:case"end":return e.stop()}}),e)})))),he()(pe()(n),"saveGame",W()(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B([{name:"fileId",value:n.state.gameState.gameId},{name:"content",value:gameState.export()},{name:"oid",value:n.state.oid?n.state.oid:""}],"post");case 2:(t=e.sent)&&t.oid&&n.setState({oid:t.oid});case 4:case"end":return e.stop()}}),e)})))),he()(pe()(n),"saveGameOnArtificialIntelligenceMove",(function(e){"STOCKFISH_MOVE"===e.event&&(n.saveGame(),n.handleSelectWithWebsocket(e.from),n.handleSelectWithWebsocket(e.to))})),he()(pe()(n),"updateGameState",(function(e){e?n.setState({gameState:e}):console.error("Can't update gameState: object is falsy.")})),he()(pe()(n),"handleWebSocketMessage",(function(e){if(e.playerId!==n.props.userId)switch(e.event){default:return void console.error("Unhandled payload",{payload:e});case"WEBSOCKET_EVENT_JOIN":return void n.handleJoin(e);case"WEBSOCKET_EVENT_DISCONNECTED":var t=e.playerId;return void n.handleDisconnect({playerId:t});case"WEBSOCKET_EVENT_SELECT":var r=e.x,a=e.y;return void n.handleSelect({x:r,y:a});case"WEBSOCKET_EVENT_SET_OPTION":var i=e.name,o=e.value;return void n.handleSetOption({name:i,value:o});case"WEBSOCKET_EVENT_SET_ARTIFICIAL_INTELLIGENCE_OPTION":var c=e.name,s=e.value;return void n.handleSetAIOption({name:c,value:s})}})),he()(pe()(n),"handleJoin",(function(e){var t=e.player1,r=e.player2,a=e.spectators,i=n.state.gameState,o=i.players,c=!1,s=h()(o);t!==o[0].playerId&&(s[0]=wt({},o[0],{playerId:t}),c=!0),r!==o[1].playerId&&(s[1]=wt({},o[1],{playerId:r}),c=!0),a!==n.state.spectators&&n.setState({spectators:a}),c&&(i.players=h()(s),n.updateGameState(i))})),he()(pe()(n),"handleDisconnect",(function(e){var t=e.playerId,r=n.state.gameState;r.removePlayer(t),n.updateGameState(r),n.removeSpectator(t)})),he()(pe()(n),"handleSelect",(function(e){var t=e.x,r=e.y,a=n.state.gameState,i=a.selected;if(i)if(i.x===t&&i.y===r)a.unselect();else if(i.piece){a.moveSelectedPiece({x:t,y:r})?n.saveGame():a.select({x:t,y:r})}else a.select({x:t,y:r});else a.select({x:t,y:r});window.gameState=a,n.updateGameState(a)})),he()(pe()(n),"handleSetOption",(function(e){var t=n.state,r=t.gameState,a=t.spectators,i=e.value,o=r.players[i.colorIndex].playerId;r.setPlayerControl(i.colorIndex,i.playerId),n.updateGameState(r);var c=r.players;a.includes(i.playerId)&&n.removeSpectator(i.playerId),o&&!c.map((function(e){return e.playerId})).includes(o)&&n.addSpectator(o)})),he()(pe()(n),"handleSetAIOption",(function(e){var t=e.name,r=e.value;n.state.gameState.setArtificialIntelligenceOption({name:t,value:r})})),he()(pe()(n),"removeSpectator",(function(e){var t=h()(n.state.spectators).filter((function(t){return t!==e}));t.length!==n.state.spectators.length&&n.setState({spectators:t})})),he()(pe()(n),"addSpectator",(function(e){var t=[].concat(h()(n.state.spectators),[e]);n.setState({spectators:t})})),he()(pe()(n),"handleSelectWithWebsocket",(function(e){var t=e.x,r=e.y;n.handleSelect({x:t,y:r}),n.state.gameSocket.sendMessage({event:"WEBSOCKET_EVENT_SELECT",x:t,y:r})})),he()(pe()(n),"handleUpdateOptionWithWebsocket",(function(e){var t=e.name,r=e.value;n.state.gameSocket.sendMessage({event:"WEBSOCKET_EVENT_SET_OPTION",name:t,value:r})})),he()(pe()(n),"handleUpdateAIOptionWithWebsocket",(function(e){n.state.gameSocket.sendMessage(wt({event:"WEBSOCKET_EVENT_SET_ARTIFICIAL_INTELLIGENCE_OPTION"},e))}));var r="UNKNOWN";r=e.gameData?"LOCAL":e.gameId&&"new"!==e.gameId?"REMOTE":"NEW";var a=new _e({artificialIntelligenceViewEventHandler:n.saveGameOnArtificialIntelligenceMove,firstPlayerId:e.userId});switch(r){default:console.error("Unhandled entrypoint: ".concat(r));break;case"NEW":n.props.history.replace({pathname:"/game/".concat(a.gameId)}),a.newGame();break;case"LOCAL":a.import(e.gameData),a.resume(),n.props.history.replace("/game/".concat(a.gameId));break;case"REMOTE":n.loadGame()}var i=new Ge;i.init({eventHandler:n.handleWebSocketMessage}),i.gameId=e.gameId,i.playerId=e.userId,n.state={gameState:a,gameSocket:i,settingsOpened:!1,aiSettingsOpened:!1,offlineMode:!1,spectators:[]},window.gameState=a;var o=U(),c=o.name,s=o.version,l=o.repository,u=o.author;return console.log("".concat(c," v").concat(s," by ").concat(u)),console.log("repository: ".concat(l)),console.log("game entrypoint: ".concat(r)),n}return me()(t,e),ie()(t,[{key:"componentDidMount",value:function(){var e=this,t=!1;setInterval((function(){if(e.state.gameState.gameEndedAt)t||(t=!0,e.updateGameState(gameState));else{var n=e.state.gameState;n.updateTimePlayed(),e.updateGameState(n)}}),1e3)}},{key:"render",value:function(){return a.a.createElement(It,null,a.a.createElement(at,{userId:this.props.userId,gameState:this.state.gameState,updateGameState:this.updateGameState,spectators:this.state.spectators,removeSpectator:this.removeSpectator,addSpectator:this.addSpectator,themeIndex:this.props.themeIndex,setThemeIndex:this.props.setThemeIndex,handleUpdateOptionWithWebsocket:this.handleUpdateOptionWithWebsocket,handleUpdateAIOptionWithWebsocket:this.handleUpdateAIOptionWithWebsocket}),a.a.createElement(Ot,null,a.a.createElement(vt,{gameState:this.state.gameState,colorIndex:0}),a.a.createElement(dt,{gameState:this.state.gameState,handleSelectWithWebsocket:this.handleSelectWithWebsocket}),a.a.createElement(vt,{gameState:this.state.gameState,colorIndex:1}),a.a.createElement(bt,{gameState:this.state.gameState})))}}]),t}(r.Component),It=m.c.div.withConfig({displayName:"GameView__View",componentId:"sc-1r250k0-0"})(["display:flex;justify-content:center;flex-direction:column;align-items:center;min-height:100vh;user-select:none;color:",";"],(function(e){return e.theme.color1})),Ot=m.c.div.withConfig({displayName:"GameView__Wrapper",componentId:"sc-1r250k0-1"})(["display:flex;flex-direction:column;align-items:center;"]);function Ct(){var e=s()(["\n    body {\n        margin: 0;\n        background: ",";\n    }\n\n    a {\n        text-decoration: none;\n        color: ",";\n    }\n"]);return Ct=function(){return e},e}var Pt=Object(m.b)(Ct(),(function(e){return e.theme.background1}),(function(e){return e.theme.link.normal}));o.a.render(a.a.createElement((function(){var e=G("themeIndex",0),t=u()(e,2),n=t[0],i=t[1],o=function(){var e=G("user",{}),t=u()(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){function e(){return(e=W()(A.a.mark((function e(){var t,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(F.a)(),n={userId:t},e.next=4,B([{name:"userId",value:t},{name:"content",value:JSON.stringify(n)}],"post","user");case 4:a(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n||function(){e.apply(this,arguments)}()}),[n]),[n]}(),c=u()(o,1)[0];return a.a.createElement(m.a,{theme:Be[n||0]},a.a.createElement("div",null,a.a.createElement(Pt,null),a.a.createElement(d.a,null,a.a.createElement(p.c,null,a.a.createElement(p.a,{exact:!0,path:"/game/:gameId",render:function(e){return a.a.createElement(jt,{userId:c&&c.userId,gameData:v&&"undefined"!=typeof DEBUG_GAME&&DEBUG_GAME,gameId:e.match.params.gameId,history:e.history,location:e.location,themeIndex:n,setThemeIndex:i})}}),a.a.createElement(p.a,{path:"/",render:function(){return a.a.createElement(X,{userId:c&&c.userId})}})))))}),null),document.getElementById("app"))},21:function(e){e.exports=JSON.parse('{"b":"chess","d":"1.1.11","a":"Yves Gurcan","c":{"type":"git","url":"https://github.com/yvesgurcan/chess-client"}}')},26:function(e,t){e.exports=function(e){var t="";switch(e.type){default:t=e.type.substring(0,1);break;case"knight":t="n"}switch(e.player){default:return t;case 0:return t.toUpperCase()}}}},[[193,1,2]]]);